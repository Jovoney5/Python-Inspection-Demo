<!DOCTYPE html>
<html>
<head>
    <title>Swimming Pool Inspection Detail</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            font-size: 12px;
            background-color: #f4f4f4;
        }
        .form-container {
            width: 800px;
            margin: 0 auto;
            border: 1px solid #000;
            padding: 10px;
            background: white;
        }
        h1 {
            font-size: 14px;
            text-align: center;
            margin: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #000;
            padding: 5px;
            text-align: left;
        }
        th {
            background: #f0f0f0;
        }
        .header {
            font-weight: bold;
        }
        .critical {
            background-color: #4A4A4A;
            color: white;
        }
        .input-field {
            width: 100%;
            border: none;
            background: transparent;
            font-size: 12px;
        }
        .checkbox-group {
            display: flex;
            gap: 10px;
        }
        .comments {
            height: 100px;
            width: 100%;
            border: 1px solid #ccc;
            resize: vertical;
            font-size: 12px;
        }
        b {
            font-weight: bold;
        }
        .buttons {
            margin-top: 20px;
            text-align: center;
        }
        .btn {
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 14px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
        }
        #print-btn { background-color: #007bff; }
        #print-btn:hover { background-color: #0069d9; }
        #save-btn { background-color: #28a745; }
        #save-btn:hover { background-color: #218838; }
        #share-btn { background-color: #17a2b8; }
        #share-btn:hover { background-color: #138496; }
        #back-btn { background-color: #6c757d; }
        #back-btn:hover { background-color: #5a6268; }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Swimming Pools Inspection Form</h1>
        <table>
            <tr>
                <td>Operator</td>
                <td>{{ inspection.establishment_name }}</td>
                <td>Date Inspection</td>
                <td>{{ inspection.inspection_date }}</td>
                <td>Inspector's Id</td>
                <td>{{ inspection.inspector_name }}</td>
            </tr>
            <tr>
                <td>Pool Class</td>
                <td>{{ inspection.type_of_establishment }}</td>
                <td>Address</td>
                <td colspan="3">{{ inspection.address }}</td>
            </tr>
            <tr>
                <td>Physical Location</td>
                <td colspan="5">{{ inspection.physical_location }}</td>
            </tr>
        </table>

        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Details</th>
                    <th>Results</th>
                    <th>No</th>
                    <th>Details</th>
                    <th>Results</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>1</b></td>
                    <td class="header">Documentation (15%)</td>
                    <td></td>
                    <td><b>6</b></td>
                    <td class="header">Safety (10%)</td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['1a'] == 0 %}critical{% endif %}">
                    <td>a</td>
                    <td>Written procedures for microbiological monitoring of pool water implemented</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['1a'] == 5 else 'No' }}</td>
                    <td>a</td>
                    <td>Reaching poles with hook</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['6a'] == 5 else 'No' }}</td>
                </tr>
                <tr class="{% if inspection.scores['1d'] == 0 %}critical{% endif %}">
                    <td>d</td>
                    <td>Acceptable monitoring procedures</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['1d'] == 5 else 'No' }}</td>
                    <td>b</td>
                    <td>Two throwing aids</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['6b'] == 5 else 'No' }}</td>
                </tr>
                <tr class="{% if inspection.scores['1f'] == 0 %}critical{% endif %}">
                    <td>f</td>
                    <td>Written emergency procedures established and implemented</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['1f'] == 5 else 'No' }}</td>
                    <td>c</td>
                    <td>Spine board with cervical collar</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['6c'] == 5 else 'No' }}</td>
                </tr>
                <tr class="{% if inspection.scores['1g'] == 0 %}critical{% endif %}">
                    <td>g</td>
                    <td>Personal liability and accident insurance</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['1g'] == 5 else 'No' }}</td>
                    <td>d</td>
                    <td>Well equipped first aid kit</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['6d'] == 5 else 'No' }}</td>
                </tr>
                <tr class="{% if inspection.scores['1h'] == 0 %}critical{% endif %}">
                    <td>h</td>
                    <td>Lifeguard/Lifesaver certification</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['1h'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>2</b></td>
                    <td class="header">Physical condition of pool (10%)</td>
                    <td></td>
                    <td><b>7</b></td>
                    <td class="header">Signs and notices (5%)</td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['2c'] == 0 %}critical{% endif %}">
                    <td>c</td>
                    <td>All surfaces of the deck and pool free from obstruction that can cause accident/injury</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['2c'] == 5 else 'No' }}</td>
                    <td>a</td>
                    <td>Caution notices - pool depth indications</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['7a'] == 5 else 'No' }}</td>
                </tr>
                <tr class="{% if inspection.scores['2g'] == 0 %}critical{% endif %}">
                    <td>g</td>
                    <td>Perimeter drains free of debris</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['2g'] == 5 else 'No' }}</td>
                    <td>b</td>
                    <td>Public health notices</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['7b'] == 5 else 'No' }}</td>
                </tr>
                <tr>
                    <td><b>3</b></td>
                    <td class="header">Pool chemistry (20%)</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['3a'] == 0 %}critical{% endif %}">
                    <td>a</td>
                    <td>Clarity</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['3a'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['3b'] == 0 %}critical{% endif %}">
                    <td>b</td>
                    <td>Chlorine residual > 0.5 mg/l</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['3b'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['3c'] == 0 %}critical{% endif %}">
                    <td>c</td>
                    <td>pH value within range of 7.5 and 7.8</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['3c'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>4</b></td>
                    <td class="header">Pool chemicals (10%)</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['4a'] == 0 %}critical{% endif %}">
                    <td>a</td>
                    <td>Pool chemicals - stored safely</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['4a'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>b</td>
                    <td>Dispensed automatically or in a safe manner</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['4b'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><b>5</b></td>
                    <td class="header">Sanitary facilities (10%)</td>
                    <td></td>
                    <td><b>8</b></td>
                    <td class="header">Lifeguards/Lifesavers (10%)</td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['5b'] == 0 %}critical{% endif %}">
                    <td>b</td>
                    <td>Vented</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['5b'] == 5 else 'No' }}</td>
                    <td>a</td>
                    <td>Licence/Lifeguards always on duty during pool opening hours [NA]</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['8a'] == 5 else 'No' }}</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>b</td>
                    <td>Trained lifesavers readily available</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['8b'] == 5 else 'No' }}</td>
                </tr>
                <tr>
                    <td><b>9</b></td>
                    <td class="header">Additional Requirements</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr class="{% if inspection.scores['9a'] == 0 %}critical{% endif %}">
                    <td>a</td>
                    <td>Pool drained and cleaned monthly</td>
                    <td class="checkbox-group">{{ 'Yes' if inspection.scores['9a'] == 5 else 'No' }}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>

        <p>Inspector's Comments:</p>
        <textarea class="comments" readonly>{{ inspection.comments }}</textarea>

        <table>
            <tr>
                <td>Inspector's Signature:</td>
                <td>{{ inspection.inspector_signature }}</td>
                <td>Date:</td>
                <td>{{ inspection.inspector_date }}</td>
            </tr>
            <tr>
                <td>Manager's Signature:</td>
                <td>{{ inspection.manager_signature }}</td>
                <td>Date:</td>
                <td>{{ inspection.manager_date }}</td>
            </tr>
        </table>

        <div class="buttons">
            <button id="print-btn" class="btn" type="button" onclick="window.print()">Print</button>
            <button id="save-btn" class="btn" type="button" onclick="alert('Download functionality triggered. Implement file download logic here.')">Download</button>
            <button id="share-btn" class="btn" type="button" onclick="alert('Share functionality not implemented yet.')">Share</button>
            <a href="{{ url_for('login') }}" id="back-btn" class="btn">Back to Dashboard</a>
        </div>
    </div>
</body>
</html>